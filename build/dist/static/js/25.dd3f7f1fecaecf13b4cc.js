webpackJsonp([25],{Rq8c:function(e,o){},zmjy:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});t("Fd2+");var i={name:"ChangePassword",data:function(){return{form:{phone:null},columns:["60 Malaysia","86 China","852 Hong Kong","886 Taiwan"],showPickerAreaCode:!1,areaCode:"",phoneList:{verify_code:"",isSms:!1}}},created:function(){},methods:{onConfirm:function(e){this.areaCode=e,this.showPicker=!1,this.showPickerAreaCode=!1},sendCode:function(){var e=this;if(!this.phoneList.isSms)if(this.form.phone){var o={phone:this.areaCode.split(" ")[0]+this.form.phone,type:"forget_password"};this.$axios({method:"POST",url:"/api/v1/verify_code",data:o}).then(function(t){if(console.log(t,o),console.log(t,o),200===t.state_code){e.$toast({type:"success",message:t.message}),e.phoneList.isSms=!0;var i=e;setTimeout(function(){i.phoneList.isSms=!1},6e4)}else e.$toast({type:"fail",message:t.message})}).catch(function(o){e.$toast({type:"fail",message:"Failed to obtain the verification code. Procedure"})})}else this.$toast("Please enter your mobile phone number first")},verifyCode:function(e){var o=this;console.log(this.areaCode,333);var t=this.areaCode.split(" ")[0]+this.form.phone,i={phone:t,verify_code:this.phoneList.verify_code,type:"forget_password"};this.$axios({method:"GET",url:"/api/v1/verify_code",params:i}).then(function(e){if(console.log(e,"返回的值"),200===e.state_code){var i=o;setTimeout(function(){i.$router.push({name:"NewPassword",params:{secret:e.secret,phone:t}})},600)}else o.$toast({type:"fail",message:e.message})}).catch(function(e){o.$toast({type:"fail",message:"Verification code error"})})}}},n={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("van-form",{on:{submit:e.verifyCode}},[t("van-field",{attrs:{readonly:"",clickable:"",label:"Area Code",center:"",required:!0,rules:[{required:!0}],value:e.areaCode,placeholder:"Area Code"},on:{click:function(o){e.showPickerAreaCode=!0}}}),e._v(" "),t("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.showPickerAreaCode,callback:function(o){e.showPickerAreaCode=o},expression:"showPickerAreaCode"}},[t("van-picker",{attrs:{"show-toolbar":"",columns:e.columns,"confirm-button-text":"Confirm","cancel-button-text":"Cancel"},on:{cancel:function(o){e.showPickerAreaCode=!1},confirm:e.onConfirm}})],1),e._v(" "),t("van-field",{attrs:{name:"Mobile Number",center:"",required:!0,type:"text",label:"Mobile Number",placeholder:"Please enter the Mobile Number",rules:[{required:!0}]},model:{value:e.form.phone,callback:function(o){e.$set(e.form,"phone",o)},expression:"form.phone"}},[t("van-button",{staticClass:"SMSconfirm",attrs:{slot:"button","native-type":"button",disabled:e.phoneList.isSms},on:{click:function(o){return e.sendCode()}},slot:"button"},[e._v("Send Code")])],1),e._v(" "),t("van-field",{attrs:{center:"",required:!0,label:"Verification Code",placeholder:"Verification Code",rules:[{required:!0}]},model:{value:e.phoneList.verify_code,callback:function(o){e.$set(e.phoneList,"verify_code",o)},expression:"phoneList.verify_code"}}),e._v(" "),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{staticClass:"loginBtn",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]};var s=t("VU/8")(i,n,!1,function(e){t("Rq8c")},"data-v-0d2a7da8",null);o.default=s.exports}});
//# sourceMappingURL=25.dd3f7f1fecaecf13b4cc.js.map